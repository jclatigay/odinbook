<h1>Users</h1>

<ul class="list-group">
  <% @users.each do |user| %>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <%= link_to user.email, user_path(user) %>
      <% unless user == current_user %>
        <% if current_user.follow_requests_sent.exists?(followed_id: user.id) %>
          <%= button_to "Unfollow", 
              follow_request_path(current_user.follow_requests_sent.find_by(followed_id: user.id)), 
              method: :delete, 
              class: "btn btn-danger btn-sm" %>
        <% else %>
          <%= button_to "Follow", 
              follow_requests_path(follow_request: { followed_id: user.id }), 
              method: :post, 
              class: "btn btn-primary btn-sm" %>
        <% end %>
      <% end %>
    </li>
  <% end %>
</ul>
